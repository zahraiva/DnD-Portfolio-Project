<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realm of Adventures - D&D</title>
    <link rel="stylesheet" href="landing.css">
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Cinzel:wght@400;600;800&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="modal.css">
    <link rel="stylesheet" href="map-container-fix.css">
</head>
<body>
    <div class="background-overlay"></div>
    
    <header>
        <nav>
            <div class="logo">
                <i class="fas fa-dragon"></i>
                <span>Dungeons & Dragons</span>
            </div>
            <ul class="nav-links">
                <li><a href="#" data-page="home" class="active"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#" data-page="story"><i class="fas fa-book-open"></i> Story</a></li>
                <li><a href="#" data-page="map"><i class="fas fa-map-marked-alt"></i> Map</a></li>
                <li><a href="#" data-page="characters"><i class="fas fa-users"></i> Characters</a></li>
                <li><a href="index.html" class="login-btn"><i class="fas fa-sign-in-alt"></i> Login</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <!-- Home Page -->
        <section id="home" class="page active">
            <div class="hero-content">
                <h1>Enter a World of Wonders</h1>
                <p>Discover Tales, Meet Legendary Heroes, Navigate Realms, and Let Our Chatbot Be Your Guide on Every Adventure!</p>
                <button class="cta-button" data-target="story">Begin Your Adventure</button>
            </div>
        </section>

        <!-- Story Page -->
        <section id="story" class="page">
            <div class="section-content">
                <h2>Epic Tales Await</h2>
                <div class="story-cards">
                    <div class="story-card" id="strahd-card">
                        <i class="fas fa-skull"></i>
                        <h3>Curse of Strahd</h3>
                        <p>Enter the mist-shrouded realm of Barovia, where the vampire Count Strahd von Zarovich awaits.</p>
                        <div class="story-img-container">
                            <img src="images/strahd.jpg" alt="Curse of Strahd" class="story-img">
                        </div>
                        <span class="story-badge">Levels 1-10</span>
                        <button class="story-details-btn" data-story="strahd">Learn More</button>
                        <button class="view-map-btn" data-map="barovia">View Map</button>
                    </div>
                    <div class="story-card" id="phandelver-card">
                        <i class="fas fa-gem"></i>

































                        
                        <h3>Lost Mine of Phandelver</h3>
                        <p>Discover the secrets of the legendary Wave Echo Cave and its magical Forge of Spells.</p>
                        <div class="story-img-container">
                            <img src="images/phandelver.jpg" alt="Lost Mine of Phandelver" class="story-img">
                        </div>
                        <span class="story-badge">Levels 1-5</span>
                        <button class="story-details-btn" data-story="phandelver">Learn More</button>
                        <button class="view-map-btn" data-map="phandelver">View Map</button>
                    </div>
                    <div class="story-card" id="witchlight-card">
                        <i class="fas fa-hat-wizard"></i>
                        <h3>The Wild Beyond the Witchlight</h3>
                        <p>Embark on a journey through the Feywild, where magic and wonder await.</p>
                        <div class="story-img-container">
                            <img src="images/witchlightstory.jpeg" alt="The Wild Beyond the Witchlight" class="story-img">
                        </div>
                        <span class="story-badge">Levels 1-10</span>
                        <button class="story-details-btn" data-story="witchlight">Learn More</button>
                        <button class="view-map-btn" data-map="witchlight">View Map</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Map Page -->
        <section id="map" class="page">
            <h2>Interactive Maps</h2>
            
            <div class="map-selector">
                <div class="map-tabs-container">
                    <div class="map-tabs">
                        <button class="map-tab active" data-map="barovia">Barovia</button>
                        <button class="map-tab" data-map="phandelver">Phandelver</button>
                        <button class="map-tab" data-map="witchlight">Witchlight</button>
                    </div>
                </div>
                
                <!-- Map loading indicator -->
                <div class="map-container">
                    <button class="map-control-btn add-character-btn"><i class="fas fa-user-plus"></i> Add Character</button>
                    <button class="map-control-btn reset-map-btn"><i class="fas fa-undo"></i> Reset Map</button>
                    <button class="fullscreen-btn" id="fullscreenBtn"><i class="fas fa-expand"></i></button>
                    
                    <div class="map-loading">
                        <i class="fas fa-spinner"></i> Loading map...
                    </div>
                    
                    <div id="barovia-map" class="game-map active">
                        <img src="images/barovia.webp" alt="Map of Barovia" class="map-base-img">
                        <div class="map-markers">
                            <div class="character-marker draggable" data-character="player1" style="left: 50%; top: 50%;">
                                <i class="fas fa-user-circle"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div id="phandelver-map" class="game-map">
                        <img src="images/phandelver.webp" alt="Map of Phandelver" class="map-base-img" 
                             onload="this.setAttribute('data-loaded', 'true');">
                        <div class="map-markers">
                            <div class="character-marker draggable" data-character="player1" style="left: 50%; top: 50%;">
                                <i class="fas fa-user-circle"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div id="witchlight-map" class="game-map">
                        <img src="images/witchlightmap.jpg" alt="Map of Witchlight" class="map-base-img" 
                             onload="this.setAttribute('data-loaded', 'true');">
                        <div class="map-markers">
                            <div class="character-marker draggable" data-character="player1" style="left: 50%; top: 50%;">
                                <i class="fas fa-user-circle"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Characters Page -->
        <section id="characters" class="page">
            <div class="section-content">
                <h2>Meet the Heroes</h2>
                <div class="class-selection">
                    <div class="class-cards">
                        <div class="class-card" data-class="wizard">
                            <div class="character-icon"><i class="fas fa-hat-wizard"></i></div>
                            <h3>Wizards</h3>
                            <p>Masters of arcane magic</p>
                            <button class="view-characters-btn">View Characters</button>
                        </div>
                        <div class="class-card" data-class="warrior">
                            <div class="character-icon"><i class="fas fa-shield-alt"></i></div>
                            <h3>Warriors</h3>
                            <p>Brave defenders of the realm</p>
                            <button class="view-characters-btn">View Characters</button>
                        </div>
                        <div class="class-card" data-class="ranger">
                            <div class="character-icon"><i class="fas fa-skull"></i></div>
                            <h3>Rangers</h3>
                            <p>Skilled hunters and trackers</p>
                            <button class="view-characters-btn">View Characters</button>
                        </div>
                        <div class="class-card" data-class="rogue">
                            <div class="character-icon"><i class="fas fa-mask"></i></div>
                            <h3>Rogues</h3>
                            <p>Masters of stealth and cunning</p>
                            <button class="view-characters-btn">View Characters</button>
                        </div>
                    </div>
                </div>
                
                <!-- Character Details Sections -->
                <div class="character-details-container">
                    <!-- Wizard Characters -->
                    <div class="character-details" id="wizard-characters" style="display: none;">
                        <h3>Wizard Characters</h3>
                        <div class="character-list">
                            <div class="character-detail-card">
                                <div class="character-portrait">
                                    <i class="fas fa-hat-wizard"></i>
                                </div>
                                <div class="character-info">
                                    <h4>Elminster Aumar</h4>
                                    <p><strong>Race:</strong> Human</p>
                                    <p><strong>Level:</strong> 20</p>
                                    <p><strong>Specialty:</strong> Archmage, master of all schools of magic</p>
                                    <p><strong>Background:</strong> The most powerful wizard in the Forgotten Realms, Elminster has lived for centuries and served as the Chosen of Mystra.</p>
                                </div>
                            </div>
                            <div class="character-detail-card">
                                <div class="character-portrait">
                                    <i class="fas fa-hat-wizard"></i>
                                </div>
                                <div class="character-info">
                                    <h4>Raistlin Majere</h4>
                                    <p><strong>Race:</strong> Human</p>
                                    <p><strong>Level:</strong> 15</p>
                                    <p><strong>Specialty:</strong> Illusion and necromancy</p>
                                    <p><strong>Background:</strong> A frail but ambitious mage with golden hourglass eyes, Raistlin's pursuit of power led him down a dark path.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Warrior Characters -->
                    <div class="character-details" id="warrior-characters" style="display: none;">
                        <h3>Warrior Characters</h3>
                        <div class="character-list">
                            <div class="character-detail-card">
                                <div class="character-portrait">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="character-info">
                                    <h4>Bruenor Battlehammer</h4>
                                    <p><strong>Race:</strong> Dwarf</p>
                                    <p><strong>Level:</strong> 12</p>
                                    <p><strong>Specialty:</strong> Shield mastery and dwarven weaponry</p>
                                    <p><strong>Background:</strong> King of Mithral Hall and member of the Companions of the Hall, Bruenor is known for his exceptional craftsmanship and battle prowess.</p>
                                </div>
                            </div>
                            <div class="character-detail-card">
                                <div class="character-portrait">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="character-info">
                                    <h4>Tordek Ironfist</h4>
                                    <p><strong>Race:</strong> Dwarf</p>
                                    <p><strong>Level:</strong> 10</p>
                                    <p><strong>Specialty:</strong> Two-handed weapons and heavy armor</p>
                                    <p><strong>Background:</strong> A stalwart defender who left his mountain home to seek glory in battle against the forces of evil.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ranger Characters -->
                    <div class="character-details" id="ranger-characters" style="display: none;">
                        <h3>Ranger Characters</h3>
                        <div class="character-list">
                            <div class="character-detail-card">
                                <div class="character-portrait">
                                    <i class="fas fa-skull"></i>
                                </div>
                                <div class="character-info">
                                    <h4>Drizzt Do'Urden</h4>
                                    <p><strong>Race:</strong> Drow (Dark Elf)</p>
                                    <p><strong>Level:</strong> 16</p>
                                    <p><strong>Specialty:</strong> Dual-wielding scimitars and forest survival</p>
                                    <p><strong>Background:</strong> A renegade drow who rejected the evil ways of his people to forge his own path on the surface world.</p>
                                </div>
                            </div>
                            <div class="character-detail-card">
                                <div class="character-portrait">
                                    <i class="fas fa-skull"></i>
                                </div>
                                <div class="character-info">
                                    <h4>Minsc</h4>
                                    <p><strong>Race:</strong> Human</p>
                                    <p><strong>Level:</strong> 9</p>
                                    <p><strong>Specialty:</strong> Berserker ranger with animal companion</p>
                                    <p><strong>Background:</strong> A kind-hearted but simple-minded ranger from Rashemen, always accompanied by his miniature giant space hamster, Boo.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Rogue Characters -->
                    <div class="character-details" id="rogue-characters" style="display: none;">
                        <h3>Rogue Characters</h3>
                        <div class="character-list">
                            <div class="character-detail-card">
                                <div class="character-portrait">
                                    <i class="fas fa-mask"></i>
                                </div>
                                <div class="character-info">
                                    <h4>Artemis Entreri</h4>
                                    <p><strong>Race:</strong> Human</p>
                                    <p><strong>Level:</strong> 15</p>
                                    <p><strong>Specialty:</strong> Assassination and dagger mastery</p>
                                    <p><strong>Background:</strong> The most lethal assassin in Faerûn, Entreri is known for his ruthless efficiency and rivalry with Drizzt Do'Urden.</p>
                                </div>
                            </div>
                            <div class="character-detail-card">
                                <div class="character-portrait">
                                    <i class="fas fa-mask"></i>
                                </div>
                                <div class="character-info">
                                    <h4>Jarlaxle Baenre</h4>
                                    <p><strong>Race:</strong> Drow</p>
                                    <p><strong>Level:</strong> 17</p>
                                    <p><strong>Specialty:</strong> Subterfuge, magic items, and leadership</p>
                                    <p><strong>Background:</strong> The flamboyant leader of Bregan D'aerthe, a mercenary band of rogue drow males, known for his cunning and extensive collection of magical items.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Story Details Modal -->
    <div id="storyDetailsModal" class="modal">
        <div class="modal-content story-modal-content">
            <span class="close">&times;</span>
            <div id="strahd-details" class="story-details" style="display: none;">
                <h2>Curse of Strahd</h2>
                <div class="story-header">
                    <div class="story-img-large">
                        <img src="images/strahd-large.jpg" alt="Curse of Strahd">
                    </div>
                    <div class="story-info">
                        <p><strong>Difficulty:</strong> Challenging</p>
                        <p><strong>Level Range:</strong> 1-10</p>
                        <p><strong>Setting:</strong> Gothic Horror</p>
                        <p><strong>Featured Creatures:</strong> Vampires, Werewolves, Ghosts, Zombies</p>
                    </div>
                </div>
                <div class="story-description">
                    <p>Under raging storm clouds, the vampire Count Strahd von Zarovich stands silhouetted against the ancient walls of Castle Ravenloft. Rumbling thunder pounds the castle spires. The wind's howling increases as he turns his gaze down toward the village of Barovia.</p>
                    <p>Far below, yet not beyond his keen eyesight, a party of adventurers has just entered his domain. Strahd's face forms the barest hint of a smile as his dark plan unfolds. He knew they were coming, and he knows why they came — all according to his plan.</p>
                    <p>A lightning flash rips through the darkness, but Strahd is gone. Only the howling of the wind fills the midnight air. The master of Castle Ravenloft is having guests for dinner. And you are invited.</p>
                </div>
                <div class="story-buttons">
                    <button class="cta-button start-adventure-btn">Begin This Adventure</button>
                    <button class="view-map-btn" data-map="barovia">View Map</button>
                </div>
            </div>
            
            <div id="phandelver-details" class="story-details" style="display: none;">
                <h2>Lost Mine of Phandelver</h2>
                <div class="story-header">
                    <div class="story-img-large">
                        <img src="images/phandelver-large.jpg" alt="Lost Mine of Phandelver">
                    </div>
                    <div class="story-info">
                        <p><strong>Difficulty:</strong> Beginner-friendly</p>
                        <p><strong>Level Range:</strong> 1-5</p>
                        <p><strong>Setting:</strong> Classic Fantasy</p>
                        <p><strong>Featured Creatures:</strong> Goblins, Bugbears, Nothic, Black Spider</p>
                    </div>
                </div>
                <div class="story-description">
                    <p>More than five hundred years ago, clans of dwarves and gnomes made an agreement known as the Phandelver's Pact, by which they would share a rich mine in a wondrous cavern known as Wave Echo Cave. In addition to its mineral wealth, the mine contained great magical power.</p>
                    <p>Human spellcasters allied themselves with the dwarves and gnomes to channel and bind that energy into a great forge called the Forge of Spells, where magic items could be crafted. Times were good, and the nearby human town of Phandalin prospered as well.</p>
                    <p>But then disaster struck when orcs swept through the North and laid waste to all in their path. A powerful force of orcs reinforced by evil mercenary wizards attacked Wave Echo Cave to seize its riches and magic treasures. The ensuing battle destroyed much of the cavern. Few survived, and the location of Wave Echo Cave was lost.</p>
                    <p>For centuries, rumors of buried riches have attracted treasure seekers and opportunists to the area around Phandalin, but no one has ever succeeded in locating the lost mine.</p>
                </div>
                <div class="story-buttons">
                    <button class="cta-button start-adventure-btn">Begin This Adventure</button>
                    <button class="view-map-btn" data-map="phandelver">View Map</button>
                </div>
            </div>
            
            <div id="witchlight-details" class="story-details" style="display: none;">
                <h2>The Wild Beyond the Witchlight</h2>
                <div class="story-header">
                    <div class="story-img-large">
                        <img src="images/witchlightstory.jpeg" alt="The Wild Beyond the Witchlight">
                    </div>
                    <div class="story-info">
                        <p><strong>Difficulty:</strong> Challenging</p>
                        <p><strong>Level Range:</strong> 1-10</p>
                        <p><strong>Setting:</strong> Fantasy</p>
                        <p><strong>Featured Creatures:</strong> Fey, Hags, Sprites, Satyrs</p>
                    </div>
                </div>
                <div class="story-description">
                    <p>Embark on a journey through the Feywild, where magic and wonder await. Explore the mystical realm of Prismeer, where the fabric of reality is woven and unwoven.</p>
                    <p>Meet the enigmatic Mr. Witchlight, a mysterious figure with a penchant for the unknown. Uncover the secrets of the Witchlight Carnival, a mystical traveling show that appears and disappears at random.</p>
                    <p>Will you answer the call to adventure and brave the unknown dangers of the Feywild? The choice is yours.</p>
                </div>
                <div class="story-buttons">
                    <button class="cta-button start-adventure-btn">Begin This Adventure</button>
                    <button class="view-map-btn" data-map="witchlight">View Map</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Game Modal -->
    <div id="createGameModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Create New Game</h2>
            <form id="createGameForm">
                <div class="form-section">
                    <h3>Game Details</h3>
                    <input type="text" name="gameName" placeholder="Game Name" required>
                    <textarea name="gameDescription" placeholder="Game Description" rows="3"></textarea>
                </div>

                <div class="form-section">
                    <h3>Characters</h3>
                    <div id="charactersList">
                        <div class="character-entry">
                            <input type="text" name="characterName" placeholder="Character Name">
                            <select name="characterClass" class="character-class">
                                <option value="">Select Class</option>
                                <option value="warrior">Warrior</option>
                                <option value="mage">Mage</option>
                                <option value="rogue">Rogue</option>
                                <option value="cleric">Cleric</option>
                            </select>
                            <div class="character-buttons">
                                <button type="button" class="add-details-btn">Add Skills</button>
                                <button type="button" class="add-items-btn">Add Items</button>
                            </div>
                        </div>
                    </div>
                    <button type="button" id="addCharacterBtn" class="secondary-btn"><i class="fas fa-plus"></i> Add Character</button>
                </div>
                <div class="form-section">
                    <h3>Story</h3>
                    <select id="storySelect" required>
                        <option value="">Select Story</option>
                        <option value="lost-mines">Lost Mine of Phandelver</option>
                        <option value="curse-strahd">Curse of Strahd</option>
                        <option value="witchlight">The Wild Beyond the Witchlight</option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">Create Game</button>
            </form>
        </div>
    </div>

    <!-- Character Details Modal -->
    <div id="characterDetailsModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Character Skills</h2>
            <p class="help-text">Enter your character skills below (one per line)</p>
            <textarea id="skillsTextarea" rows="10" placeholder="Athletics&#10;Stealth&#10;Arcana&#10;Perception&#10;Add more skills..."></textarea>
            <div class="skills-preview">
                <h3>Preview</h3>
                <div id="skillsPreview" class="skills-grid">
                    <!-- Skills will appear here -->
                </div>
            </div>
            <button class="submit-btn" id="saveSkillsBtn">Save Skills</button>
        </div>
    </div>

    <!-- Character Items Modal -->
    <div id="characterItemsModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Character Items</h2>
            <p class="help-text">Enter your character items below (one per line)</p>
            <textarea id="itemsTextarea" rows="10" placeholder="Sword&#10;Shield&#10;Health Potion&#10;Rope&#10;Add more items..."></textarea>
            <div class="items-preview">
                <h3>Preview</h3>
                <div id="itemsPreview" class="items-grid">
                    <!-- Items will appear here -->
                </div>
            </div>
            <button class="submit-btn" id="saveItemsBtn">Save Items</button>
        </div>
    </div>

    <!-- My Games Modal -->
    <div id="myGamesModal" class="modal">
        <div class="modal-content games-modal-content">
            <span class="close">&times;</span>
            <h2>Your Saved Games</h2>
            <p class="modal-description">Continue your adventures or start a new campaign.</p>
            <div class="games-grid" id="gamesGrid">
                <!-- Games will be added here dynamically -->
            </div>
        </div>
    </div>

    <!-- Game Buttons -->
    <button id="myGamesBtn" class="game-btn saved-games-btn"><i class="fas fa-save"></i> Saved Games</button>
    <button id="createGameBtn" class="game-btn create-game-btn"><i class="fas fa-plus"></i> Create Game</button>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>About Us</h4>
                <p>Join our community of adventurers and create unforgettable stories together.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#story">Story</a></li>
                    <li><a href="#map">Map</a></li>
                    <li><a href="#characters">Characters</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Connect</h4>
                <div class="social-links">
                    <a href="#"><i class="fab fa-discord"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-reddit"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Realm of Adventures. All rights reserved.</p>
        </div>
    </footer>

    <!-- Import script files -->
    <script src="landing.js"></script>
    <script src="map.js"></script>
    <script src="story.js"></script>
    <script src="saved-games.js"></script>
    <script src="navigation.js"></script>
    <script src="game.js"></script>
    <script src="characters.js"></script>
    <script src="button-fixer.js"></script>
</body>
</html>